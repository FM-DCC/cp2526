\documentclass[aspectratio=169]{beamer}

\input{src/macros/preamble}
\input{src/macros/sli_aux}

\begin{document}

% \setLectureBasic{Cyber-Physical Computation}
\setLecture[\\ \emph{(slides mainly from Nelma Moreira)}]%
    {2}{Transition Systems}


\section{Sistemas de Transição}

\begin{frame}{Constituintes de um processo}
\begin{itemize}
  \item Um conjunto de estados
\item Um conjunto de transições entre estados
\item Um estado inicial
\item Cada transição é etiquetada por uma ação que  acciona a mudança de estado.
\end{itemize}
  
\end{frame}

\begin{frame}{}
\begin{block}{Estados}
  \begin{itemize}[<+->]
    \item Cor actual de um semáforo de trânsito
\only<1>{\includegraphics[width=3cm]{src/img/nam/traffic-light-red}}
\item Valor corrente das variáveis de um programa e do contador de programa
\item A avião a voar
\item Valor da conta bancária
  \end{itemize}
\end{block}
\pause
  \begin{block}{Transições}
  \begin{itemize}[<+->]
    \item Passagem de  um semáforo de trânsito de vermelho para verde
\item Execução de um comando num programa
\item Aterragem de um avião
\item Depositar dinheiro numa conta bancária
  \end{itemize}
\end{block}
\end{frame}
\begin{frame}{Sistemas de transição}
\begin{Def}
  Um sistema etiquetado de transições (LTS) sobre $Act$ é um triplo $(S,\tr,s_0)$ 
\begin{itemize}
  \item $S$ conjunto de estados
\item $\tr\subseteq S\times Act \times S$ a relação de transição
\item $s_0\in S$ estado inicial
\end{itemize}
\end{Def}
  \only<2->{ Um Fósforo...
\begin{center}
\begin{tikzpicture}[>=stealth, shorten >=1pt, auto, node distance=4cm,initial text={}]
\node[state,  initial,inner sep=1pt, minimum size=5pt] (S0){UNUSED};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){BURNING};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S1] (S2){EXTINCT};

\path[->](S0) edge  node {\color{blue} strike}(S1)
         (S1) edge   node { \color{blue} extinguish }(S2);
\end{tikzpicture}
\end{center}
}
\only<3->{
\begin{itemize}
  \item $S=\{UNUSED,BURNING, EXTINCT\}$
  \item $act=\{strike, extinguish\}$
\item $\tr=\{(UNUSED,strike, BURNING), (BURNING, extinguish, EXTINCT)\}$
\item $s_0=UNUSED$ 
\end{itemize}
}
\end{frame}
\begin{frame}{Sucessores}

Em vez de $(s,\alpha,s')\in \tr$ escrevemos $\trans{s}{\alpha}{s'}$ e dizemos que $s'$ é um   \alert{sucessor} de $s$, sendo $\alpha\in Act$ uma ação.
\begin{itemize}[<+->]
  \item $Post(s,\alpha)=\{\;s'\in S\mid \trans{s}{\alpha}{s'}\;\}$
\item $Post(s,A)=\bigcup_{\alpha\in A} Post(s,\alpha)$, $A\subseteq Act$
\item $Post(s)= Post(s,Act)$
\item$Post(C,\alpha)=\bigcup_{s\in C} Post(s,\alpha)$, $C\subseteq S$
\item $Post(C,A)=\bigcup_{s\in C}\bigcup_{\alpha\in A} Post(s,\alpha)$, $C\subseteq S$, $A\subseteq Act$
\item Ações que ocorrem no estado $s$
$$Act(s)=\{\alpha\in Act\mid \exists s': \trans{s}{\alpha}{s'}\}$$
\item Ações que podem ser observadas no estado $s$
$$Com(s)=\{\alpha\in Com \mid \exists s': \trans{s}{\alpha}{s'}\}$$
\item Análogo para $Int(s)$
\end{itemize}
  \end{frame}
\only<presentation>{\begin{frame}{Um Telefone}}
\only<article>{\begin{frame}{}
\begin{example}\ Considera a seguinte simulação de um Telefone}
\begin{center}
\includegraphics[width=7cm]{src/img/nam/telefone}
\end{center}
\begin{itemize}[<+->]
\item Descreve o sistema de transições $(S,\tr,s_0)$ e $Act=Com\cup Int$.
\item  Alguns exemplos: $Post(RINGING,Act)=\pause\{TALKING, IDLE,OFF\} $
\item   $Post(Post(RINGING,Act),Int)=\pause\{OFF\} $
\item $Com(RINGING)=\pause\{accept,reject\_call\}$
\end{itemize}
  \only<article>{
  Temos que 
  \begin{align*}S&=\{RINGING, TALKING,IDLE,OFF,PLAYING\}\\
  s_0&=OFF\\
  Com&=\{accept,reject_call,incoming\_call,switch\_on,switch\_off,dial,\\& end\_call, load\_game, game\_over\}\\
  Int&=\{[battery\_low]\}\\
  Act&=Com \cup Int\\
  \tr&=\{ (OFF,switch\_on,IDLE), (IDLE, incoming\_call, RINGING),\\& (IDLE, [battery\_low], OFF),  (IDLE, dial, TALKING), \ldots\} 
  \end{align*}
  Podes completar indicando $Act(IDLE)$.
\end{example}}
\end{frame}

\begin{frame}{Estados atingíveis}
  \begin{itemize}
    \item Seja $TS=(S,\tr,s_0)$ um LTS. 
    \item Um estado $s'\in S$ é \alert{atingível} de $s$ se $s'=s$  ou
% \item
\\~~~~
$\exists n\geq 0$ e estados $s_1,s_2,\ldots , s_n$ tal que
$\trans{s}{\alpha_1}{s_1}\trans{}{\alpha_2} {s_2}\;\cdots\trans{}{\alpha_n}{s_n}$ e $s_n=s'$.
\item neste caso diz-se que existe um \alert{caminho} de tamanho $n$ entre $s$ e $s'$ 
\item um caminho  é \alert{acíclico} se $s_i\not=s_j$ para todo $i\not=j$; caso contrário diz-se cíclico.

\item $Reach(s)$ conjunto de estados atingíveis de $s$
\item $Reach(TS)=Reach(s_0)$

\end{itemize}
Sendo $\trs\subseteq S\times Act^\star \times S$ o fecho reflexivo e transitivo de $\tr$,  então  $
\transs{s}{\omega}{s'}$ se e só se $s'\in Reach(s)$, onde $\omega=\alpha_1\cdots \alpha_n$ para alguns $\alpha_i\in Act$.
\only<article>{
\begin{exerc}
  Mostra a afirmação anterior.
\end{exerc}}
\end{frame}
\section{Não-determinismo}
\begin{frame}{Não-determinismo}
  \begin{columns}
\begin{column}{0.6\textwidth}
  \begin{itemize}[<+->]
    \item Permite descrever o comportamento de sistemas reais
\item Abstração de detalhes dos sistemas
\begin{itemize}
\item não é necessária uma descrição completa
\item os sistemas podem ser muito complexos
\item alguns parâmetros são desconhecidos
  \end{itemize}
\item existem várias maneiras de interagir
\item a noção é mais geral que em Linguagens Formais
\end{itemize}
\end{column}
  \begin{column}{0.4\textwidth}
  \includegraphics[width=5cm]{src/img/nam/telefone}
\end{column}
\end{columns}

\end{frame}
\begin{frame}{} %{Não-determinismo}
\begin{itemize}[<+->]
  \item Seja $TS=(S,\tr,s_0)$ um LTS. 
\item $TS$ é \alert{determinístico} se e só se para todo $s\in S$
\item $|Post(s)|\leq 1$ e $|Act(s)|\leq 1$
\item senão é \alert{não-determinístico}
\end{itemize}
\only<4>{
\begin{columns}
\begin{column}{0.5\textwidth}
  Um sistema é não determinístico se tem um estado com duas ou mais transições mas não sabemos qual irá acontecer.

\end{column}
  \begin{column}{0.5\textwidth}
  \includegraphics[width=6cm]{src/img/nam/telefone}
\end{column}
\end{columns}}


\end{frame}

\begin{frame}{Não-determinismo interno e externo}
Um  estado $s$  é
\begin{itemize}[<+->]
  \item não-determinístico \alert{externo} sse $|Com(s)|> 1$
\item não-determinístico \alert{interno} sse $|Post(s,Int)|> 1$ ou  $|Post(s,a)|> 1$ para algum $a\in Com(s)$ 
\end{itemize}
\end{frame}
\begin{frame}[fragile]{Não-determinismo interno e externo}\begin{center}
\begin{tikzpicture}[>=stealth, shorten >=1pt, auto, node distance=2cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt] (S0){0};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){1};
\node[state,  inner sep=1pt, minimum size=5pt][below of =S0] (S3){3};
\node[state,  inner sep=1pt, minimum size=5pt][below of =S1] (S2){2};
\path[->](S0) edge [bend left, swap] node {[a]}(S3)
        edge [bend left] node {[b]}(S1)
   (S1) edge  [ bend left] node { b }(S0)
          edge  [bend left] node { c}(S2)
  (S2)  edge [loop below ] node {b}  ()
     edge [bend left] node {b} (S1)
  (S3)  edge [loop below ] node {b}  ()
     edge [bend left] node {[a]} (S0)
;
\end{tikzpicture}
\end{center}

\begin{itemize}[<+->]
  \item   $1$ é não-determisnístico externo  
\item $0$  e $2$ são   não-determisnísticos internos. 
\item $3$ é não-determisnístico mas nem interno nem externo.
\end{itemize}
\end{frame}

\section{Tipo de Sistemas de Transição}
\begin{frame}{Tipo de Sistemas de Transição}
Seja $TS=(S,\tr,s_0)$ com ações em $Act$
\begin{itemize}[<+->]
  \item\alert{Finito} Se o grafo é acíclico e $S$ e $Act$ finitos
  
\only<1>{\begin{tikzpicture}[>=stealth, shorten >=1pt, auto, node distance=2cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt] (S0){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){};
\node[state,  inner sep=1pt, minimum size=5pt][below of =S1] (S2){};
\path[->](S0) edge   node {a}(S1)
        edge  node {b}(S2)
   (S1) edge node { b }(S2)
;
\end{tikzpicture}}

\item\alert{Finito por estados} Se $S$ e $Act$ são conjuntos finitos

 \only<2>{\begin{tikzpicture}[>=stealth, shorten >=1pt, auto,node distance=2cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt] (S0){0};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){1};
\node[state,  inner sep=1pt, minimum size=5pt][below of =S0] (S3){3};
\node[state,  inner sep=1pt, minimum size=5pt][below of =S1] (S2){2};
\path[->](S0) edge [bend left, swap] node {[a]}(S3)
        edge [bend left] node {[b]}(S1)
   (S1) edge  [ bend left] node { b }(S0)
          edge  [bend left] node { c}(S2)
  (S2)  edge [loop below ] node {b}  ()
     edge [bend left] node {b} (S1)
  (S3)  edge [loop below ] node {b}  ()
     edge [bend left] node {[a]} (S0)
;
\end{tikzpicture}}

\item\alert{Ramificação-limitada} $(\exists k\geq 0)(\forall s\in S)( |Post(s)|\leq k)$

\only<3>{\begin{tikzpicture}[>=stealth, shorten >=1pt, auto,node distance=1cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt] (S0){$s_0$};
\node[state,  inner sep=1pt, minimum size=5pt][below of =S0] (S1){$s_1$};
\node[state, inner sep=1pt, minimum size=5pt][below of =S1] (S2){$s_2$};
%\node[state,  inner sep=1pt, minimum size=5pt][below of =S2] (S3){};
\node[  inner sep=1pt, minimum size=5pt][below of =S2] (S3){$\vdots$};
\path[->](S0) edge [bend left] node {inc}(S1)
   (S1) edge  [ bend left] node { dec }(S0)
        edge [bend left] node {inc}  (S2)
  (S2)  edge [bend left ] node {dec}   (S1)
      edge [bend left] node {inc}  (S3)
(S3)  edge [bend left ] node {dec}   (S2);
\end{tikzpicture}

$s_n$ guarda o valor $n$ que pode ser incrementado ou decrementado de $1$. Tem grau de ramificação $2$. Não é finito por estados}

\item\alert{Finitamente Ramificado} $(\forall s\in S)(|Post(s)|\leq \infty)$. Caso contrário é infinitamente ramificado


\only<4>{\begin{tikzpicture}[>=stealth, shorten >=1pt, auto, node distance=2cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt] (S0){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){};
\path[->](S0) edge  [bend left] node {$a_i$, \tiny{$i\geq 1$}}(S1)
;
\end{tikzpicture} 

É infinitamente ramificado}
\end{itemize}
\only<5>{\begin{tikzpicture}[>=stealth, shorten >=1pt, auto, node distance=1.5cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt] (S0){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S1] (S2){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S2] (S3){};
\node[ inner sep=1pt, minimum size=5pt][right of =S3] (S4){$\ldots$};
\node[state,  inner sep=1pt, minimum size=5pt][below  of =S1] (S11){};
\node[state,  inner sep=1pt, minimum size=5pt][below right of =S2] (S21){};
\node[state,  inner sep=1pt, minimum size=5pt][below left of =S2] (S22){};
\node[state,  inner sep=1pt, minimum size=5pt][below right of =S3] (S31){};
\node[state,  inner sep=1pt, minimum size=5pt][below of =S3] (S32){};
\node[state,  inner sep=1pt, minimum size=5pt][below left of =S3] (S33){};

\path[->](S0) edge   node {$a$}(S1)
(S1) edge   node {$a$}(S2)
  edge node {$a$} (S11)
(S2) edge   node {$a$}(S3)
edge node {$a$} (S22)
edge node {$a$} (S21)
(S3) edge   node {}(S4)
edge node {$a$} (S31)
edge node {$a$} (S32)
edge node {$a$} (S33)
;
\end{tikzpicture}

Não é de ramificação limitada}

\end{frame}

\begin{frame}{Equivalência de LTSs (I)}

\begin{itemize}
  \item 
Uma questão fulcral é a de decidir quando dois LTSs são equivalentes.
\item Em princípio serão quando um observador não os consegue distinguir. \item Mas como definir isso?
Podemos obrigar a que
\begin{itemize}
\item  os LTS são isomorfos como grafos (Isomorfismo)
\item ou os LTS tenham os mesmos caminhos (Equivalência por traços (linguagens))
\item ou ...
\item iremos deixar isto para mais tarde
\end{itemize}
\end{itemize}

\end{frame}
\section{Modelação de Processos Concorrentes}

\begin{frame}{Processos Concorrentes}
\begin{itemize}[<+->]
  \item Cada processo é representado por um sistema de transições (LTS) 
\item Neste caso, o tempo avança quando se muda de estado por uma transição (execução de um programa sequencial)

\item O que acontece se executam concorrentemente?
\item Assumimos que:
\begin{itemize}
  \item O tempo só é considerado de forma relativa (um processo $p$  ocorre antes do processo $q$)
  \item A ações são atómicas e instantâneas
  \item Os processos concorrentes executam independentemente excepto se explicitamente comunicarem (coordenação)
\end{itemize}
\end{itemize} 
\end{frame}

\begin{frame}{Processos concorrentes $A$ e $X$}
\onslide<1->{
\begin{center}
\begin{tikzpicture}[>=stealth, shorten >=1pt, auto, node distance=1cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt, color=red , initial] (S0){A};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S1] (S2){};
\node[state,  inner sep=1pt, minimum size=5pt,  color=red , initial ] [below of =S0](T1){X};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T1] (T2){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T2] (T3){};

\path[->](S0) edge node {a}(S1)
   (S1) edge  node { b }(S2)
  (T1) edge node {x}(T2)
   (T2) edge  node { y }(T3)
;
\end{tikzpicture}
\end{center}
}
\only<2->{

\begin{columns}
\begin{column}{0.3\textwidth}
  se $A$ executa \alert{a}
\end{column}
  
  \begin{column}{0.7\textwidth}
\begin{center}  \begin{tikzpicture}[>=stealth, shorten >=1pt, auto, node distance=1cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt,  initial] (S0){A};
\node[state,  inner sep=1pt, minimum size=5pt , color=red][right of =S0] (S1){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S1] (S2){};
\node[state,  inner sep=1pt, minimum size=5pt,  color=red , initial ] [below of =S0](T1){X};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T1] (T2){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T2] (T3){};

\path[->](S0) edge node {a}(S1)
   (S1) edge  node { b }(S2)
  (T1) edge node {x}(T2)
   (T2) edge  node { y }(T3)
;
\end{tikzpicture}\end{center}
\end{column}
\end{columns}
}
 

\only <3->{
\begin{columns}
\begin{column}{0.3\textwidth}
  se $X$ executa  \alert{x}
\end{column}

\begin{column}{0.7\textwidth}\begin{center}
\begin{tikzpicture}[>=stealth, shorten >=1pt, auto, node distance=1cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt,  initial, color=red] (S0){A};
\node[state,  inner sep=1pt, minimum size=5pt ][right of =S0] (S1){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S1] (S2){};
\node[state,  inner sep=1pt, minimum size=5pt, initial ] [below of =S0](T1){X};
\node[state,  inner sep=1pt, minimum size=5pt, color=red ][right of =T1] (T2){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T2] (T3){};

\path[->](S0) edge node {a}(S1)
   (S1) edge  node { b }(S2)
  (T1) edge node {x}(T2)
   (T2) edge  node { y }(T3)
;
\end{tikzpicture}\end{center}
\end{column}
\end{columns}
}
\only <4->{
\begin{columns}
\begin{column}{0.3\textwidth}
 se $A$ e $X$ executam \alert{x} e  \alert{a} "simultaneamente"
\end{column}
\
\begin{column}{0.7\textwidth}
\begin{center}
\begin{tikzpicture}[>=stealth, shorten >=1pt, auto, node distance=1cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt,  initial] (S0){A};
\node[state,  inner sep=1pt, minimum size=5pt , color=red][right of =S0] (S1){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S1] (S2){};
\node[state,  inner sep=1pt, minimum size=5pt, initial ] [below of =S0](T1){X};
\node[state,  inner sep=1pt, minimum size=5pt, color=red ][right of =T1] (T2){};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T2] (T3){};

\path[->](S0) edge node {a}(S1)
   (S1) edge  node { b }(S2)
  (T1) edge node {x}(T2)
   (T2) edge  node { y }(T3)
;
\end{tikzpicture}\end{center}
\end{column}
\end{columns}
}

\end{frame}

\begin{frame}{Produto de LTS}
A execução de dois processos é um novo processo (LTS)!

\begin{center}
\begin{tikzpicture}[>=stealth, shorten >=2.5pt, auto, node distance=2cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt,  initial] (S0){A,X};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){A1,X};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S1] (S2){A2,X};
\node[state,  inner sep=1pt, minimum size=5pt ] [below of =S0](T1){A,X1};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T1] (T2){A1,X1};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T2] (T3){A2,X1};
\node[state,  inner sep=1pt, minimum size=5pt] [below of =T1](P1){A,X2};
\node[state,  inner sep=1pt, minimum size=5pt ][right of =P1] (P2){A1,X2};
\node[state,  inner sep=1pt, minimum size=5pt][right of =P2] (P3){A2,X2};

\path[->](S0) edge node {a}(S1)
      edge node {x} (T1)
      edge node [color=red]{ a,x} (T2)
   (S1) edge  node { b }(S2)
      edge node {x} (T2)
      edge node {b,x} (T3)
  (S2)  edge node {x} (T3)
  (T1) edge node {a}(T2)
     edge node {y}(P1)
    edge node {a,y} (P2)
   (T2) edge  node { b }(T3)
     edge node {y} (P2)
    edge node {a,y} (P3)
  (T3)  edge node {y} (P3)
(P1) edge node {a}(P2)
(P2) edge  node { b }(P3)
;
\end{tikzpicture}
  \end{center}
\end{frame}
\begin{frame}{Simultaneidade}
\begin{columns}
\begin{column}{0.6\textwidth}
  \begin{itemize}
    \item As diagonais têm conjuntos de ações (!)
\item Mas como observar que duas ações independentes ocorrem ao mesmo tempo?
\item O seu efeito corresponde a ser primeiro uma e depois outra não interessando a ordem
\item Sendo não determinístico, podemos ignorar essas transições.
\item Não são observáveis
  \end{itemize}
\end{column}
  \begin{column}{0.4\textwidth}
{\tiny
\begin{tikzpicture}[>=stealth, shorten >=2.5pt, auto, node distance=1.5cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt,  initial] (S0){A,X};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){A1,X};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S1] (S2){A2,X};
\node[state,  inner sep=1pt, minimum size=5pt ] [below of =S0](T1){A,X1};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T1] (T2){A1,X1};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T2] (T3){A2,X1};
\node[state,  inner sep=1pt, minimum size=5pt] [below of =T1](P1){A,X2};
\node[state,  inner sep=1pt, minimum size=5pt ][right of =P1] (P2){A1,X2};
\node[state,  inner sep=1pt, minimum size=5pt][right of =P2] (P3){A2,X2};
\path[->](S0) edge node {a}(S1)
      edge node {x} (T1)
      edge node [color=red]{ a,x} (T2)
   (S1) edge  node { b }(S2)
      edge node {x} (T2)
      edge node {b,x} (T3)
  (S2)  edge node {x} (T3)
  (T1) edge node {a}(T2)
     edge node {y}(P1)
    edge node {a,y} (P2)
   (T2) edge  node { b }(T3)
     edge node {y} (P2)
    edge node {a,y} (P3)
  (T3)  edge node {y} (P3)
(P1) edge node {a}(P2)
(P2) edge  node { b }(P3)
;
\end{tikzpicture}}
  \end{column}
\end{columns}
\end{frame}

\begin{frame}{Produto de LTS: sem\emph{ diagonais}}

Os estados atingíveis são os mesmos. As ações podem ocorrer por qualquer ordem (não determinismo).

\begin{center}
\begin{tikzpicture}[>=stealth, shorten >=2.5pt, auto, node distance=2cm]
\node[state,  inner sep=1pt, minimum size=5pt, initial] (S0){A,X};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S0] (S1){A1,X};
\node[state,  inner sep=1pt, minimum size=5pt][right of =S1] (S2){A2,X};
\node[state,  inner sep=1pt, minimum size=5pt ] [below of =S0](T1){A,X1};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T1] (T2){A1,X1};
\node[state,  inner sep=1pt, minimum size=5pt][right of =T2] (T3){A2,X1};
\node[state,  inner sep=1pt, minimum size=5pt] [below of =T1](P1){A,X2};
\node[state,  inner sep=1pt, minimum size=5pt ][right of =P1] (P2){A1,X2};
\node[state,  inner sep=1pt, minimum size=5pt][right of =P2] (P3){A2,X2};
\path[->](S0) edge node {a}(S1)
      edge node {x} (T1)    
   (S1) edge  node { b }(S2)
      edge node {x} (T2)  
  (S2)  edge node {x} (T3)
  (T1) edge node {a}(T2)
     edge node {y}(P1)
   (T2) edge  node { b }(T3)
     edge node {y} (P2)
  (T3)  edge node {y} (P3)
(P1) edge node {a}(P2)
(P2) edge  node { b }(P3);
\end{tikzpicture}
  \end{center}
\end{frame}

\begin{frame}{Modelo de Concorrência}
 Dados dois processos independentes a concorrência é a 
   \alert{intercalagem}  (\emph{interleaving/shuffle}) não-determinística de todas as ações dos dois processos.
    
 O Diamante de intercalagem é o seguinte:
\begin{center}
\begin{tikzpicture}[>=stealth, shorten >=2.5pt, auto, node distance=2cm,initial text={}]
\node[state,  inner sep=1pt, minimum size=5pt] (S0){};
\node[state,  inner sep=1pt, minimum size=5pt][below left of =S0] (S1){};
\node[state,  inner sep=1pt, minimum size=5pt][below right of =S0] (S2){};
\node[state,  inner sep=1pt, minimum size=5pt ] [below  right of=S1](S3){};
\path[->](S0) edge [swap] node  {a}(S1)
      edge node {x} (S2)
      
   (S1) edge [swap] node { x }(S3)

  (S2)  edge node {a} (S3);
\end{tikzpicture}
  \end{center}

\end{frame}

\end{document}
